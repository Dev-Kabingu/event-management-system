<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Event Management System</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- font awesome link -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- internal css -->
     <style>
        @keyframes fadeIn { 
            from { opacity: 0; } 
        }
        @keyframes slideInFromBottom { 
                from { transform: translateY(100%);
                    opacity: 0; 
                } 
                to { transform: translateY(0);
                     opacity: 1;
                    }
                 }
    
        form{
            width: 400px;
            height: auto;
            background: rgba(255,255,255,.2);
            backdrop-filter: blur(10px);
            border: 2px solid red;
        }
        form button{
            padding: 8px 12px;
            color: #333;
        }
     </style>
  </head>
  <body>
<!-- header -->
    <header>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="events.html">Events</a></li>
                <li><a href="admin.html">Admin</a></li>
                <li><a href="register.html">Register</a></li>
            </ul>
        </nav>
        <div class="dark-light-mode">
            <i class="fa-solid fa-sun" id="light-mode" style="display: none;"></i>
            <i class="fa-solid fa-moon"id="dark-mode"></i>
        </div>
        
     </header>
     <!-- end of header -->
      <div class="hero-container">
        <h3 style="animation: fadeIn 2s;">find your next experience</h3>
        <h1 style="animation: slideInFromBottom 3s;">discover & promote <br> upcoming events</h1>
        
            <div class="search-results">
                <div class="search-event" style="animation: slideInFromBottom 4s;">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" id="searchInput" name="search-bar" placeholder="search event by name or location ...">
                </div>
            </div>
      </div>

      <!-- featured events -->
       <div class="featured-events scrollReveal" id="featuredEvents">
        <h5>upcoming events</h5>
        <h1>featured events</h1>

<div id="eventCardsContainer"class="event-cards" style="animation: slideInFromBottom 3s;"></div>
<div id="ticketModal" style="display:none;" class="modal">
    <form id="buyTicketForm" class="modal-content">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        <button type="submit">Purchase Ticket</button>
        <button type="button" onclick="closeModal()">Close</button>
    </form>
</div>
<script>
    // Retrieve event data from sessionStorage
    var tableData = JSON.parse(sessionStorage.getItem("tableData")) || [];

    // Function to load events and display them as cards
    function loadEventCards() {
        var container = document.getElementById("eventCardsContainer");

        // Clear any previous cards
        container.innerHTML = '';

        // Loop through each event and create a card
        tableData.forEach(function(data, index) {
            var card = document.createElement("div");
            card.classList.add("event-card");

            var cardContent = `  
            <div class="card">
                <div class="card-image">
                    <img src="${data.image}" alt="image">
                </div>
                <div class="event-info">
                    <h5 class="event-name">${data.name}</h5>
                    <p class="event-description">Description: ${data.description}</p>
                    <p class="event-location">Location: ${data.location}</p>
                     <p class="event-ticket">Ticket Price: ${data.ticket}</p>
                    <p class="event-time">Time: ${data.time}</p>
                    <p class="event-date">Date: ${data.date}</p>
                </div>
                <button class="buyTicketButton" data-event-id="${index}">buy ticket</button>
            </div>          
            `;
            card.innerHTML = cardContent;
            container.appendChild(card);
        });

        // Add click event listener to buy ticket buttons
        document.querySelectorAll(".buyTicketButton").forEach(function(button) {
            button.addEventListener("click", function() {
                openModal(button.getAttribute("data-event-id"));
            });
        });
    }

    // Function to open the modal
    function openModal(eventId) {
        var modal = document.getElementById("ticketModal");
        var modalContent = document.getElementById("buyTicketForm");
        modalContent.setAttribute("data-event-id", eventId);
        modal.style.display = "block";
    }

    // Function to close the modal
    function closeModal() {
        var modal = document.getElementById("ticketModal");
        modal.style.display = "none";
    }

    // Function to handle form submission
    document.getElementById("buyTicketForm").addEventListener("submit", function(event) {
        event.preventDefault();
        var name = document.getElementById("name").value;
        var email = document.getElementById("email").value;
        var eventId = document.getElementById("buyTicketForm").getAttribute("data-event-id");
        var successMessage = `Ticket purchased successfully for event ${eventId}!`;
        alert(successMessage);
        closeModal();
    });

    // Function to filter events based on search input
    document.getElementById("searchInput").addEventListener("keyup", function() {
        var searchValue = this.value.toLowerCase();
        var filteredData = tableData.filter(function(data) {
            return data.name.toLowerCase().includes(searchValue) || data.location.toLowerCase().includes(searchValue);
        });
        displayCards(filteredData);
    });

    // Function to display filtered cards
    function displayCards(filteredData) {
        var container = document.getElementById("eventCardsContainer");
        container.innerHTML = ''; // Clear existing cards
        filteredData.forEach(function(data, index) {
            var card = document.createElement("div");
            card.classList.add("event-card");

            var cardContent = `  
            <div class="card">
                <div class="card-image">
                    <img src="${data.image}" alt="image">
                </div>
                <div class="event-info">
                    <h5 class="event-name">${data.name}</h5>
                    <p class="event-description">Description: ${data.description}</p>
                    <p class="event-location">Location: ${data.location}</p>
                    <p class="event-ticket">Ticket Price: ${data.ticket}</p>
                    <p class="event-time">Time: ${data.time}</p>
                    <p class="event-date">Date: ${data.date}</p>
                </div>
                <button class="buyTicketButton" data-event-id="${index}">buy ticket</button>
            </div>          
            `;
            card.innerHTML = cardContent;
            container.appendChild(card);
        });

        // Add click event listener to buy ticket buttons
        document.querySelectorAll(".buyTicketButton").forEach(function(button) {
            button.addEventListener("click", function() {
                openModal(button.getAttribute("data-event-id"));
            });
        });
    }

    // Load event cards when the page loads
    window.onload = function() {
        loadEventCards();
    };
</script>
    
<!-- footer -->
 <footer>
    <p>&copy 2025 | All Rights Reserved.</p>
 </footer>
 


     <!-- script file -->
      <script src="./script.js"></script>
  </body>
</html>
